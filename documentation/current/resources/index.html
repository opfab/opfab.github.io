<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Resources</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Resources</h1>
<div class="details">
<span id="revnumber">version 3.10.2.RELEASE,</span>
<span id="revdate">20 October 2022</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_appendix_b_publication_of_the_client_library_jars_to_maven_central">1. Appendix B: Publication of the client library jars to Maven Central</a>
<ul class="sectlevel2">
<li><a href="#_claiming_the_org_opfab_namespace_on_maven_central">1.1. Claiming the org.opfab namespace on Maven Central</a></li>
<li><a href="#_creating_a_gpg_key_pair">1.2. Creating a GPG key pair</a></li>
<li><a href="#_sharing_the_signing_key">1.3. Sharing the signing key</a></li>
<li><a href="#_publishing_the_public_key">1.4. Publishing the public key</a></li>
<li><a href="#_setting_up_the_signing_and_publication_in_gradle">1.5. Setting up the signing and publication in Gradle</a></li>
<li><a href="#_useful_links">1.6. Useful links</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_1_4_0_to_release_1_5_0">2. Migration Guide from release 1.4.0 to release 1.5.0</a>
<ul class="sectlevel2">
<li><a href="#_refactoring_of_configuration_management">2.1. Refactoring of configuration management</a>
<ul class="sectlevel3">
<li><a href="#_motivation_for_the_change">2.1.1. Motivation for the change</a></li>
<li><a href="#_changes_to_the_model">2.1.2. Changes to the model</a>
<ul class="sectlevel4">
<li><a href="#_on_the_businessconfig_model">2.1.2.1. On the Businessconfig model</a></li>
<li><a href="#_on_the_cards_model">2.1.2.2. On the Cards model</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_change_on_the_web_ui_json">2.2. Change on the web-ui.json</a></li>
<li><a href="#_changes_on_bundle_config_json">2.3. Changes on bundle config.json</a></li>
<li><a href="#_component_name">2.4. Component name</a></li>
<li><a href="#_changes_to_the_endpoints">2.5. Changes to the endpoints</a></li>
<li><a href="#_migration_steps">2.6. Migration steps</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_1_7_0_to_release_1_8_0">3. Migration Guide from release 1.7.0 to release 1.8.0</a>
<ul class="sectlevel2">
<li><a href="#_card_detail_definition_in_business_configuration">3.1. Card detail definition in business configuration</a></li>
<li><a href="#_business_menu_definition">3.2. Business menu definition</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_1_8_0_to_release_2_0_0">4. Migration Guide from release 1.8.0 to release 2.0.0</a>
<ul class="sectlevel2">
<li><a href="#_acknowledgmentallowed_field_in_business_configuration">4.1. AcknowledgmentAllowed field in business configuration</a></li>
<li><a href="#_response_card_templategateway_applychild">4.2. Response card : templateGateway.applyChild()</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_2_0_to_release_2_3_0">5. Migration Guide from release 2.2.0 to release 2.3.0</a>
<ul class="sectlevel2">
<li><a href="#_communication_between_template_and_opfab">5.1. Communication between template and opfab</a>
<ul class="sectlevel3">
<li><a href="#_getting_response_data_from_template">5.1.1. Getting response data from template</a></li>
<li><a href="#_getting_the_information_if_the_user_can_respond">5.1.2. Getting the information if the user can respond</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_3_0_to_release_2_4_0">6. Migration Guide from release 2.3.0 to release 2.4.0</a>
<ul class="sectlevel2">
<li><a href="#_send_card">6.1. Send card</a></li>
<li><a href="#_package_name_change">6.2. Package name change</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_4_0_to_release_2_5_0">7. Migration Guide from release 2.4.0 to release 2.5.0</a>
<ul class="sectlevel2">
<li><a href="#_send_card_2">7.1. Send card</a></li>
<li><a href="#_card_recipients">7.2. Card recipients</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_5_0_to_release_2_6_0">8. Migration Guide from release 2.5.0 to release 2.6.0</a>
<ul class="sectlevel2">
<li><a href="#_inter_service_communication_ribbon">8.1. Inter-service communication - Ribbon</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_6_0_to_release_2_7_0">9. Migration Guide from release 2.6.0 to release 2.7.0</a>
<ul class="sectlevel2">
<li><a href="#_send_card_3">9.1. Send card</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_7_0_to_release_2_8_0">10. Migration Guide from release 2.7.0 to release 2.8.0</a>
<ul class="sectlevel2">
<li><a href="#_ui_configuration_management">10.1. UI Configuration Management</a></li>
<li><a href="#_management_of_visible_menus">10.2. Management of visible menus</a></li>
<li><a href="#_simplification_mongodb_configuration">10.3. Simplification MongoDB Configuration</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_10_0_to_release_2_11_0">11. Migration Guide from release 2.10.0 to release 2.11.0</a>
<ul class="sectlevel2">
<li><a href="#_logging_screen_filter_with_tags_list">11.1. Logging screen : Filter with tags list</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_2_11_0_to_release_3_0_0">12. Migration Guide from release 2.11.0 to release 3.0.0</a>
<ul class="sectlevel2">
<li><a href="#_changes_in_configuration_due_to_business_translation_mechanism_removal">12.1. Changes in configuration due to business translation mechanism removal</a>
<ul class="sectlevel3">
<li><a href="#_template_directory">12.1.1. Template directory</a></li>
<li><a href="#_changes_in_config_json">12.1.2. Changes in config.json</a></li>
<li><a href="#_new_file_i18n_json">12.1.3. New file i18n.json</a></li>
<li><a href="#_i18n_folder">12.1.4. i18n folder</a></li>
<li><a href="#_processes_groups">12.1.5. Processes groups</a></li>
<li><a href="#_script_to_migrate_an_existing_database">12.1.6. Script to migrate an existing database</a></li>
</ul>
</li>
<li><a href="#_configuration_file_web_ui_json">12.2. Configuration file <code>web-ui.json</code></a></li>
<li><a href="#_configuration_file_common_docker_yml">12.3. Configuration file common-docker.yml</a></li>
<li><a href="#_nginx_conf_template_file">12.4. Nginx.conf.template file</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_0_0_to_release_3_1_0">13. Migration Guide from release 3.0.0 to release 3.1.0</a>
<ul class="sectlevel2">
<li><a href="#_kafka_date_format">13.1. Kafka date format</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_1_0_to_release_3_2_0">14. Migration Guide from release 3.1.0 to release 3.2.0</a>
<ul class="sectlevel2">
<li><a href="#_cache_configuration_for_i18n_files">14.1. Cache configuration for i18n files</a></li>
<li><a href="#_tag_feed_filter_removal">14.2. Tag feed filter removal</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_4_0_to_release_3_5_0">15. Migration Guide from release 3.4.0 to release 3.5.0</a>
<ul class="sectlevel2">
<li><a href="#_timezone_management_removal">15.1. Timezone management removal</a></li>
<li><a href="#_kafka_card_format_changes">15.2. Kafka card format changes</a>
<ul class="sectlevel3">
<li><a href="#_redirect_to_business_application_from_a_card">15.2.1. Redirect to business application from a card</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_5_0_to_release_3_6_0">16. Migration Guide from release 3.5.0 to release 3.6.0</a>
<ul class="sectlevel2">
<li><a href="#_template_rendering">16.1. Template rendering</a></li>
<li><a href="#_mongo_data_migration_steps">16.2. Mongo data migration steps</a></li>
<li><a href="#_about_screen">16.3. About screen</a></li>
<li><a href="#_deprecated_feature">16.4. Deprecated feature</a>
<ul class="sectlevel3">
<li><a href="#_method_templategateway_getspecificcardinformation">16.4.1. Method templateGateway.getSpecificCardInformation()</a></li>
<li><a href="#_restrict_recipient_dropdown_list_for_user">16.4.2. Restrict recipient dropdown list for user</a></li>
<li><a href="#_set_the_list_of_recipients">16.4.3. Set the list of recipients</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_6_0_to_release_3_7_0">17. Migration Guide from release 3.6.0 to release 3.7.0</a>
<ul class="sectlevel2">
<li><a href="#_docker_images_names_changed">17.1. Docker images names changed</a></li>
<li><a href="#_third_parties_configuration">17.2. Third parties configuration</a></li>
<li><a href="#_rename_attribute_externaldeviceid">17.3. Rename attribute externalDeviceId</a>
<ul class="sectlevel3">
<li><a href="#_in_the_configuration_file">17.3.1. In the configuration file</a></li>
<li><a href="#_changes_in_the_mongo_data_base">17.3.2. Changes in the Mongo data base</a>
<ul class="sectlevel4">
<li><a href="#_before_the_migration">17.3.2.1. Before the migration</a></li>
<li><a href="#_once_the_migration_is_done">17.3.2.2. Once the migration is done</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_deprecated_feature_2">17.4. Deprecated feature</a>
<ul class="sectlevel3">
<li><a href="#_field_recurrence">17.4.1. Field recurrence</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_7_0_to_release_3_8_0">18. Migration Guide from release 3.7.0 to release 3.8.0</a>
<ul class="sectlevel2">
<li><a href="#_kafka_card_format_changes_2">18.1. Kafka card format changes</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_8_x_to_release_3_9_0">19. Migration Guide from release 3.8.x to release 3.9.0</a>
<ul class="sectlevel2">
<li><a href="#_web_ui_json_config_file">19.1. <code>web-ui.json</code> config file</a></li>
</ul>
</li>
<li><a href="#_migration_guide_from_release_3_9_x_to_release_3_10_0">20. Migration Guide from release 3.9.x to release 3.10.0</a>
<ul class="sectlevel2">
<li><a href="#_card_publication_with_not_existent_process_or_state">20.1. Card publication with not existent process or state</a></li>
<li><a href="#_web_ui_json_config_file_2">20.2. <code>web-ui.json</code> config file</a>
<ul class="sectlevel3">
<li><a href="#_settings_about_section">20.2.1. <code>settings.about</code> section</a></li>
<li><a href="#_settings_infos_hide_section">20.2.2. <code>settings.infos.hide</code> section</a></li>
<li><a href="#_feed_filtering_and_sorting">20.2.3. Feed filtering and sorting</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_appendix_b_publication_of_the_client_library_jars_to_maven_central"><a class="anchor" href="#_appendix_b_publication_of_the_client_library_jars_to_maven_central"></a>1. Appendix B: Publication of the client library jars to Maven Central</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a summary of the steps that were necessary to initially set up the publication of jars to Maven Central.
The process to actually publish the jars for each release is detailed in the release process documentation.</p>
</div>
<div class="olist arabic">
<div class="title">Publication process overview</div>
<ol class="arabic">
<li>
<p>Building and signing the jars</p>
</li>
<li>
<p>Publishing them to a staging repository where there are validations
(e.g. check that the POM contains the required information, validating the signature against the public key)</p>
</li>
<li>
<p>If the validations pass, release the jar to Maven Central</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_claiming_the_org_opfab_namespace_on_maven_central"><a class="anchor" href="#_claiming_the_org_opfab_namespace_on_maven_central"></a>1.1. Claiming the org.opfab namespace on Maven Central</h3>
<div class="paragraph">
<p>This is done by logging an <a href="https://issues.sonatype.org/browse/OSSRH-67392">issue</a> on the
<a href="https://issues.sonatype.org/">Sonatype JIRA</a> (create an account first). The namespace needs to match a domain that you
own (and this will be verified), which is why we had to rename our packages to <code>org.opfab.XXX</code>.</p>
</div>
<div class="paragraph">
<p>You can then request other users to be granted rights on the namespace as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_gpg_key_pair"><a class="anchor" href="#_creating_a_gpg_key_pair"></a>1.2. Creating a GPG key pair</h3>
<div class="paragraph">
<p>The key pair is generated with GPG2, keeping the default options and using the <code>opfabtech</code> technical account email as
contact. The key is further secured with a passphrase.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg2 --full-generate-key

gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
  (14) Existing key from card
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (3072) 3072
Requested keysize is 3072 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 18m
Key expires at Tue 11 Oct 2022 12:38:13 CEST
Is this correct? (y/N) y

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    "Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"

Real name: opfabtech
E-mail address: opfabtech@gmail.com
Comment: technical account for the OperatorFabric project
You selected this USER-ID:
    "opfabtech (technical account for the OperatorFabric project) &lt;opfabtech@gmail.com&gt;"

Change (N)ame, (C)omment, (E)-mail or (O)kay/(Q)uit? o
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilise the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
gpg: key 469E7252B8D25328 marked as ultimately trusted
gpg: directory '/home/guironnetale/.gnupg/openpgp-revocs.d' created
gpg: revocation certificate stored as '/home/guironnetale/.gnupg/openpgp-revocs.d/FE0D7AFF9C129CFBBDC18A0B469E7252B8D25328.rev'
public and secret key created and signed.

pub   rsa3072 2021-04-19 [SC] [expires: 2022-10-11]
      FE0D7AFF9C129CFBBDC18A0B469E7252B8D25328
uid                      opfabtech (technical account for the OperatorFabric project) &lt;opfabtech@gmail.com&gt;
sub   rsa3072 2021-04-19 [E] [expires: 2022-10-11]</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A standard practice is to have the key expire in 18 months, so I set up a calendar reminder for us to renew it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_sharing_the_signing_key"><a class="anchor" href="#_sharing_the_signing_key"></a>1.3. Sharing the signing key</h3>
<div class="paragraph">
<p>For other developers to be able to sign jars, you need to share both the key pair and the passphrase.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Export the key pair to a file</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg2 --export-secret-keys OPFAB_KEY_ID &gt; key_pair.key</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Send the file to the other developers via a secure channel</p>
</li>
<li>
<p>Then, they need to import this file to their keyring (see the
<a href="/documentation/current/dev_env/index.html#client_lib_pub_conf">documentation for the publishing task</a>
for details).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_publishing_the_public_key"><a class="anchor" href="#_publishing_the_public_key"></a>1.4. Publishing the public key</h3>
<div class="paragraph">
<p>The public key needs to be published to (preferably several) key directories so people wanting to use the signed jars
can check the signature against the public key. It is also checked as part of the validations performed on the
staging repository.</p>
</div>
<div class="paragraph">
<p>Our public key was initially published to <code>pool.sks-keyservers.net</code>, which became deprecated (causing the publication to
fail), so it was then published to the two servers that the sonatype validations seem to rely on.</p>
</div>
<div class="paragraph">
<div class="title">OpenPGP (<a href="https://keys.openpgp.org/" class="bare">keys.openpgp.org/</a>)</div>
<p>For OpenPGP you need to export the public key (and not the key pair) to a file and upload it to their web interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg2 --export OPFAB_KEY_ID &gt; my_key.pub</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Ubuntu (<a href="http://keyserver.ubuntu.com" class="bare">keyserver.ubuntu.com</a>)</div>
<p>For Ubuntu you need to export the public key as ascii-armored ascii and paste the result to their web interface</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg2 --export --armor OPFAB_KEY_ID</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The key can be retrieved from both these servers by searching either for <code>opfabtech@gmail.com</code> or for the key ID.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_the_signing_and_publication_in_gradle"><a class="anchor" href="#_setting_up_the_signing_and_publication_in_gradle"></a>1.5. Setting up the signing and publication in Gradle</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You can&#8217;t publish a jar with version "SNAPSHOT" to the Maven staging repositories (you would get a 403
BAD REQUEST), that&#8217;s why the Gradle publication task is configured so that if the version ends with "SNAPSHOT", the
jars should be published to a local directory (<code>repos/snapshots</code>) rather than to the Maven Central staging repository.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_useful_links"><a class="anchor" href="#_useful_links"></a>1.6. Useful links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://central.sonatype.org/publish/publish-guide/">General Sonatype Publication Documentation</a></p>
</li>
<li>
<p><a href="https://central.sonatype.org/publish/publish-gradle/">Documentation for publishing using Gradle</a></p>
</li>
<li>
<p><a href="https://docs.gradle.org/current/userguide/signing_plugin.html">Gradle Signing Plugin</a></p>
</li>
<li>
<p><a href="https://docs.gradle.org/current/userguide/publishing_maven.html">Gradle Maven Publish Plugin</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_1_4_0_to_release_1_5_0"><a class="anchor" href="#_migration_guide_from_release_1_4_0_to_release_1_5_0"></a>2. Migration Guide from release 1.4.0 to release 1.5.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_refactoring_of_configuration_management"><a class="anchor" href="#_refactoring_of_configuration_management"></a>2.1. Refactoring of configuration management</h3>
<div class="sect3">
<h4 id="_motivation_for_the_change"><a class="anchor" href="#_motivation_for_the_change"></a>2.1.1. Motivation for the change</h4>
<div class="paragraph">
<p>The initial situation was to have a <code>Third</code> concept that was meant to represent third-party applications that publish
content (cards) to OperatorFabric.
As such, a Businessconfig was both the sender of the message and the unit of configuration for resources for card rendering.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because of that mix of concerns, naming was not consistent across the different services in the backend and frontend as
this object could be referred to using the following terms:
* Third
* ThirdParty
* Bundle
* Publisher
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>But now that we&#8217;re aiming for cards to be sent by entities, users (see Free Message feature) or external services, it
doesn&#8217;t make sense to tie the rendering of the card ("Which configuration bundle should I take the templates and
details from?") to its publisher ("Who/What emitted this card and who/where should I reply?").</p>
</div>
</div>
<div class="sect3">
<h4 id="_changes_to_the_model"><a class="anchor" href="#_changes_to_the_model"></a>2.1.2. Changes to the model</h4>
<div class="paragraph">
<p>To do this, we decided that the <code>publisher</code> of a card would now have the sole meaning of <code>emitter</code>, and that the link
to the configuration bundle to use to render a card would now be based on its <code>process</code> field.</p>
</div>
<div class="sect4">
<h5 id="_on_the_businessconfig_model"><a class="anchor" href="#_on_the_businessconfig_model"></a>2.1.2.1. On the Businessconfig model</h5>
<div class="paragraph">
<p>We used to have a <code>Businessconfig</code> object which had an array of <code>Process</code> objects as one of its properties.
Now, the <code>Process</code> object replaces the <code>Businessconfig</code> object and this new object combines the properties of the old <code>Businessconfig</code>
and <code>Process</code> objects (menuEntries, states, etc.).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In particular, this means that while in the past one bundle could "contain" several processes, now there can be only
one process by bundle.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>Businessconfig</code> object used to have a <code>name</code> property that was actually its unique identifier (used to retrieve it through
the API for example).
It also had a <code>i18nLabelKey</code> property that was meant to be the i18n key to determine the display name of the
corresponding businessconfig, but so far it was only used to determine the display name of the associated menu in the navbar in
case there where several menu entries associated with this businessconfig.</p>
</div>
<div class="paragraph">
<p>Below is a summary of the changes to the <code>config.json</code> file that all this entails:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field before</th>
<th class="tableblock halign-left valign-top">Field after</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier of the bundle. Used to match the <code>publisher</code> field in associated cards, should now match <code>process</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I18n key for process display name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">states.mystate.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I18n key for state display name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">i18nLabelKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuLabel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I18n key for menu display name in case there are several menu entries attached to the process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">processes array is a root property, states array being a property of a given process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">states array is a root property</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example of a simple config.json file:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">TEST</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">defaultLocale</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">menuEntries</span><span class="delimiter">&quot;</span></span>: [
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">uid test 0</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://opfab.github.io/</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">menu.first</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">uid test 1</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.la-rache.com</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">menu.second</span><span class="delimiter">&quot;</span></span>}
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">i18nLabelKey</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">businessconfig.label</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">processes</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">process</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">firstState</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">details</span><span class="delimiter">&quot;</span></span>: [
            {
              <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">template.title</span><span class="delimiter">&quot;</span></span>
              },
              <span class="key"><span class="delimiter">&quot;</span><span class="content">templateName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">operation</span><span class="delimiter">&quot;</span></span>
            }
          ]
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">TEST</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">process.label</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">defaultLocale</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">menuLabel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">menu.label</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">menuEntries</span><span class="delimiter">&quot;</span></span>: [
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">uid test 0</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://opfab.github.io/</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">menu.first</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">uid test 1</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.la-rache.com</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">menu.second</span><span class="delimiter">&quot;</span></span>}
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">firstState</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">mystate.label</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">details</span><span class="delimiter">&quot;</span></span>: [
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">template.title</span><span class="delimiter">&quot;</span></span>
          },
          <span class="key"><span class="delimiter">&quot;</span><span class="content">templateName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">operation</span><span class="delimiter">&quot;</span></span>
        }
      ]
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You should also make sure that the new i18n label keys that you introduce match what is defined in the i18n
folder of the bundle.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_on_the_cards_model"><a class="anchor" href="#_on_the_cards_model"></a>2.1.2.2. On the Cards model</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field before</th>
<th class="tableblock halign-left valign-top">Field after</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">publisherVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">processVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies the version of the bundle. It was renamed for consistency now that bundles are linked to processes not
publishers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This field is now required and should match the id field of the process (bundle) to use to render the card.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">processId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">processInstanceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This field is just renamed , it represent an id of an instance of the process</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These changes impact both current cards from the feed and archived cards.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The id of the card is now build as process.processInstanceId an not anymore publisherID_process.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_change_on_the_web_ui_json"><a class="anchor" href="#_change_on_the_web_ui_json"></a>2.2. Change on the web-ui.json</h3>
<div class="paragraph">
<p>The parameter navbar.thirdmenus.type has been removed from this file. Starting from this release the related functionality has been moved on bundle basis and it&#8217;s not more global. See "Changes on bundle config.json" for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_on_bundle_config_json"><a class="anchor" href="#_changes_on_bundle_config_json"></a>2.3. Changes on bundle config.json</h3>
<div class="paragraph">
<p>Under menuEntries a new subproperty has been added: linkType. This property replace the old property navbar.thirdmenus.type in web-ui.json, making possible a more fine control of the related behaviour.</p>
</div>
</div>
<div class="sect2">
<h3 id="_component_name"><a class="anchor" href="#_component_name"></a>2.4. Component name</h3>
<div class="paragraph">
<p>We also change the component name of third which is now named businessconfig.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_to_the_endpoints"><a class="anchor" href="#_changes_to_the_endpoints"></a>2.5. Changes to the endpoints</h3>
<div class="paragraph">
<p>The <code>/third</code> endpoint becomes <code>/businessconfig/processes</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_migration_steps"><a class="anchor" href="#_migration_steps"></a>2.6. Migration steps</h3>
<div class="paragraph">
<p>This section outlines the necessary steps to migrate existing data.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to perform these steps before starting up the OperatorFabric instance because starting up services with the new
version while there are still "old" bundles in the businessconfig storage will cause the businessconfig service to crash.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Backup your existing bundles and existing Mongo data.</p>
</li>
<li>
<p>Edit your bundles as detailed above. In particular, if you had bundles containing several processes, you will need to
split them into several bundles. The <code>id</code> of the bundles should match the <code>process</code> field in the corresponding cards.</p>
</li>
<li>
<p>If you use navbar.thirdmenus.type in web-ui.json, rename it to navbar.businessmenus.type</p>
</li>
<li>
<p>Run the following scripts in the mongo shell to copy the value of <code>publisherVersion</code> to a new <code>processVersion</code> field and to copy the value of <code>processId</code> to a new <code>processInstanceId</code> field for all cards (current and archived):</p>
<div class="listingblock">
<div class="title">Current cards</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.cards.updateMany(
{},
{ $rename: { &quot;publisherVersion&quot;: &quot;processVersion&quot;, &quot;processId&quot;: &quot;processInstanceId&quot; } }
)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Archived cards</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.archivedCards.updateMany(
{},
{ $rename: { &quot;publisherVersion&quot;: &quot;processVersion&quot;, &quot;processId&quot;: &quot;processInstanceId&quot; } }
)</code></pre>
</div>
</div>
</li>
<li>
<p>Make sure you have no cards without process using the following mongo shell commands:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.cards.find({ process: null})</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.archivedCards.find({ process: null})</code></pre>
</div>
</div>
</li>
<li>
<p>If it turns out to be the case, you will need to set a process value for all these cards to finish the migration. You
can do it either manually through Compass or using a mongo shell command. For example, to set the process to "SOME_PROCESS"
for all cards with an empty process, use:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.cards.updateMany(
{ process: null },
{
$set: { &quot;process&quot;: &quot;SOME_PROCESS&quot;}
}
)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.archivedCards.updateMany(
{ process: null },
{
$set: { &quot;process&quot;: &quot;SOME_PROCESS&quot;}
}
)</code></pre>
</div>
</div>
</li>
<li>
<p>If you have any code or scripts that push bundles, you should update it to point to the new endpoint.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_1_7_0_to_release_1_8_0"><a class="anchor" href="#_migration_guide_from_release_1_7_0_to_release_1_8_0"></a>3. Migration Guide from release 1.7.0 to release 1.8.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_card_detail_definition_in_business_configuration"><a class="anchor" href="#_card_detail_definition_in_business_configuration"></a>3.1. Card detail definition in business configuration</h3>
<div class="paragraph">
<p>There is no more the need for multiple definitions of card&#8217;s detail rendering because of the removal of multi-tab rendering. The rendering of the detail of a card is configured specifying the detail title, template name and the list of styles.</p>
</div>
<div class="paragraph">
<p>In the Businessconfig model definition the field <code>details</code> has been removed.</p>
</div>
<div class="paragraph">
<p>The new fields <code>detailTitle</code>, <code>templateName</code> and <code>styles</code> have been added.</p>
</div>
<div class="paragraph">
<p>Here is an example of a simple config.json file:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">TEST</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">process.label</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">firstState</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">mystate.label</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">details</span><span class="delimiter">&quot;</span></span>: [
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">template.title</span><span class="delimiter">&quot;</span></span>
          },
          <span class="key"><span class="delimiter">&quot;</span><span class="content">templateName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">operation</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">styles</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">style1</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">style2</span><span class="delimiter">&quot;</span></span>]
        }
      ]
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">TEST</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">process.label</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">firstState</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">mystate.label</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">detailTitle</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">template.title</span><span class="delimiter">&quot;</span></span>
        },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">templateName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">operation</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">styles</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">style1</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">style2</span><span class="delimiter">&quot;</span></span>]
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_business_menu_definition"><a class="anchor" href="#_business_menu_definition"></a>3.2. Business menu definition</h3>
<div class="paragraph">
<p>The business menu are not configured anymore in the business definition but in a specific single configuration file called ui-menu.json. You must move your configuration from the config.json to this new file, see
<a href="/documentation/current/reference_doc/index.html#menu_entries">documentation</a>
.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_1_8_0_to_release_2_0_0"><a class="anchor" href="#_migration_guide_from_release_1_8_0_to_release_2_0_0"></a>4. Migration Guide from release 1.8.0 to release 2.0.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_acknowledgmentallowed_field_in_business_configuration"><a class="anchor" href="#_acknowledgmentallowed_field_in_business_configuration"></a>4.1. AcknowledgmentAllowed field in business configuration</h3>
<div class="paragraph">
<p>In the process state definition the <code>acknowledgementAllowed</code> has been renamed to <code>acknowledgmentAllowed</code>.
The acknowledgmentAllowed field in no more a boolean type and can now assume one of the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Never": acknowledgment not allowed (default value)</p>
</li>
<li>
<p>"Always": acknowledgment allowed</p>
</li>
<li>
<p>"OnlyWhenResponseDisabledForUser": acknowledgment allowed only when the response is disabled for the user</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example of a simple config.json file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">TEST</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">process.label</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">firstState</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">mystate.label</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">details</span><span class="delimiter">&quot;</span></span>: [
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">template.title</span><span class="delimiter">&quot;</span></span>
          },
          <span class="key"><span class="delimiter">&quot;</span><span class="content">templateName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">operation</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">styles</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">style1</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">style2</span><span class="delimiter">&quot;</span></span>]
        }
      ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">acknowledgmentAllowed</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Never</span><span class="delimiter">&quot;</span></span>
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_response_card_templategateway_applychild"><a class="anchor" href="#_response_card_templategateway_applychild"></a>4.2. Response card : templateGateway.applyChild()</h3>
<div class="paragraph">
<p>For card with responses, it is not necessary to call templateGateway.applyChildCards() in your template on loading
anymore, OperatorFabric will do it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_2_0_to_release_2_3_0"><a class="anchor" href="#_migration_guide_from_release_2_2_0_to_release_2_3_0"></a>5. Migration Guide from release 2.2.0 to release 2.3.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_communication_between_template_and_opfab"><a class="anchor" href="#_communication_between_template_and_opfab"></a>5.1. Communication between template and opfab</h3>
<div class="sect3">
<h4 id="_getting_response_data_from_template"><a class="anchor" href="#_getting_response_data_from_template"></a>5.1.1. Getting response data from template</h4>
<div class="paragraph">
<p>Some renaming has been done in version 2.3.0 :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the method to have the response information from template is rename in <em>getUserResponse</em> instead of <em>validyForm</em>.</p>
</li>
<li>
<p>the return object of this method shall now contains the response data in field <em>responseCardData</em> instead of <em>formData</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So if you have the following code in your template :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    templateGateway.<span class="function">validyForm</span> = <span class="keyword">function</span> () {
        const response = document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">response</span><span class="delimiter">'</span></span>).value;
        const formData = { <span class="key">response</span>: response };
        <span class="keyword">return</span> {
            <span class="key">valid</span>: <span class="predefined-constant">true</span>,
            <span class="key">formData</span>: formData
        };
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>It must be modify this way :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    templateGateway.<span class="function">getUserResponse</span> = <span class="keyword">function</span> () {
        const response = document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">response</span><span class="delimiter">'</span></span>).value;
        const responseCardData = { <span class="key">response</span>: response };
        <span class="keyword">return</span> {
            <span class="key">valid</span>: <span class="predefined-constant">true</span>,
            <span class="key">responseCardData</span>: responseCardData
        };

    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_getting_the_information_if_the_user_can_respond"><a class="anchor" href="#_getting_the_information_if_the_user_can_respond"></a>5.1.2. Getting the information if the user can respond</h4>
<div class="paragraph">
<p>To know from a template that the user can respond to a card you must now call templateGateway.isUserAllowedToRespond() instead of implementing the method templateGateway.setUserCanRespond()</p>
</div>
<div class="paragraph">
<p>So if you have the following code in your template :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    templateGateway.<span class="function">setUserCanRespond</span> = <span class="keyword">function</span>(responseEnabled) {
        <span class="keyword">if</span> (responseEnabled) {
            <span class="comment">// do something</span>
        } <span class="keyword">else</span> {
            <span class="comment">// do something</span>
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>It must be modify this way :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    <span class="keyword">if</span> (templateGateway.isUserAllowedToRespond()) {
         <span class="comment">// do something</span>
    } <span class="keyword">else</span> {
        <span class="comment">// do something</span>
    }</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_3_0_to_release_2_4_0"><a class="anchor" href="#_migration_guide_from_release_2_3_0_to_release_2_4_0"></a>6. Migration Guide from release 2.3.0 to release 2.4.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_send_card"><a class="anchor" href="#_send_card"></a>6.1. Send card</h3>
<div class="paragraph">
<p>The API does not provide an endpoint to send an array of cards anymore.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The endpoint <code>cards</code> now accepts only one card</p>
</li>
<li>
<p>The endpoint <code>async/cards</code> no longer exists</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So if you used to send several cards as array, you need to modify your code to send hem one by one via endpoint <code>cards</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_package_name_change"><a class="anchor" href="#_package_name_change"></a>6.2. Package name change</h3>
<div class="paragraph">
<p>The name of the packages in the OperatorFabric code has been changed from <code>org.lfenergy.operatorfabric.<strong></code> to
<code>org.opfab.</strong></code> in preparation for an upload of the client library to Maven Central.
You need to update any code using the client library to reflect this name change.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_4_0_to_release_2_5_0"><a class="anchor" href="#_migration_guide_from_release_2_4_0_to_release_2_5_0"></a>7. Migration Guide from release 2.4.0 to release 2.5.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_send_card_2"><a class="anchor" href="#_send_card_2"></a>7.1. Send card</h3>
<div class="paragraph">
<p>The API endpoint to send a card doesn&#8217;t return CardCreationReport object anymore.
The endPoint <code>cards</code> now returns :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>status code 201 (Created) in case of success.</p>
</li>
<li>
<p>status code 400 (Bad request) in case of a request with wrong data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So if you use CardCreationReport object when you send card, you need to modify your code to not use it anymore and to test the status code returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="_card_recipients"><a class="anchor" href="#_card_recipients"></a>7.2. Card recipients</h3>
<div class="paragraph">
<p>The deprecated card field <code>recipient</code> is now deleted. So you have to use the fields <code>userRecipients</code>, <code>groupRecipients</code>
and <code>entityRecipients</code> to send a card.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_5_0_to_release_2_6_0"><a class="anchor" href="#_migration_guide_from_release_2_5_0_to_release_2_6_0"></a>8. Migration Guide from release 2.5.0 to release 2.6.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_inter_service_communication_ribbon"><a class="anchor" href="#_inter_service_communication_ribbon"></a>8.1. Inter-service communication - Ribbon</h3>
<div class="paragraph">
<p>Ribbon was used by our Feign client that lets business services get information on the current user from the Users
service.</p>
</div>
<div class="paragraph">
<p>Ribbon is no longer maintained, so we chose to remove it from our dependencies (mostly because it was blocking any
update of the other Spring dependencies).</p>
</div>
<div class="paragraph">
<p>Instead, the Feign client now relies on an external property to know where the Users service can be reached, and there
is no load-balancing for now.</p>
</div>
<div class="paragraph">
<p>This requires a change to service configuration: the <code>users.ribbon.listOfServers</code> property should be removed and
replaced with <code>operatorfabric.servicesUrls.users</code>.</p>
</div>
<div class="paragraph">
<p>It should be set in the configuration of all business services (except users), or in the common configuration.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">operatorfabric</span>:
  <span class="key">servicesUrls</span>:
    <span class="key">users</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:2103</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>According to the Feign documentation, the property should contain "an absolute URL or resolvable hostname (the protocol
is optional)".</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This property is mandatory, if it is absent the application won&#8217;t start.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
While the ribbon property could handle an array of several urls, this new property expects a single url as
there is no load-balancing mechanism for now.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_6_0_to_release_2_7_0"><a class="anchor" href="#_migration_guide_from_release_2_6_0_to_release_2_7_0"></a>9. Migration Guide from release 2.6.0 to release 2.7.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_send_card_3"><a class="anchor" href="#_send_card_3"></a>9.1. Send card</h3>
<div class="paragraph">
<p>The API endPoint <code>cards</code> will now require authentication by default.
It is possible to configure the endpoint to not require authentication by setting the configuration parameter <code>checkAuthenticationForCardSending</code> to <code>false</code> in cards-publication service configuration file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_7_0_to_release_2_8_0"><a class="anchor" href="#_migration_guide_from_release_2_7_0_to_release_2_8_0"></a>10. Migration Guide from release 2.7.0 to release 2.8.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ui_configuration_management"><a class="anchor" href="#_ui_configuration_management"></a>10.1. UI Configuration Management</h3>
<div class="paragraph">
<p>The web-ui container has two configuration files: <code>web-ui.json</code> and <code>ui-menu.json</code>.</p>
</div>
<div class="paragraph">
<p>To avoid maintaining separate copies of these files for each <code>run environment</code> (docker, dev, Cypress), the reference
configuration will be the one for the <code>docker</code> mode, with the others being created by script, changing only the
properties that should be different between environments (e.g. environmentName).
Only the docker configuration will be version-controlled. The scripts creating the configuration are launched by
the <code>docker-compose.sh</code> and <code>docker-compose-cypress.sh</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
As a consequence, the web-ui.json and ui-menu.json files have been moved from <code>config/xxx/</code> to
<code>config/xxx/ui-config</code>. The volumes in the <code>docker-compose.yml</code> files have been updated accordingly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This new organization will also allow us to run Cypress tests against different versions of the configuration, for
example to test the behaviour of a property meant to hide a component. See the Cypress tests README
(src/test/cypress/README.adoc) for more information.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All modes (dev, docker, config) now use the <code>PASSWORD</code> authentication flow by default. If you want to test
with another authentication flow, you should use the <code>setSecurityAuthFlow.sh</code> script AFTER the containers have been
started.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example to use the CODE flow in dev mode</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd src/test/resources
.setSecurityAuthFlow.sh dev CODE</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_management_of_visible_menus"><a class="anchor" href="#_management_of_visible_menus"></a>10.2. Management of visible menus</h3>
<div class="paragraph">
<p>The visibility of some core OperatorFabric menus (monitoring, logging, feed configuration screen,&#8230;&#8203;) was so far
configurable for a given OperatorFabric instance through various properties in <code>web-ui.json</code>.</p>
</div>
<div class="paragraph">
<p>As of this version, it has been unified with that of custom menus:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It will now be managed in <code>ui-menu.json</code> along with custom menus</p>
</li>
<li>
<p>It is now possible to make these menus visible only for certain groups</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">The following properties in <code>web-ui.json</code> are no longer supported and should be removed</div>
<ul>
<li>
<p><code>navbar.hidden</code> (array of menus to hide)</p>
</li>
<li>
<p><code>admin.hidden</code> (boolean)</p>
</li>
<li>
<p><code>feedConfiguration.hidden</code> (boolean)</p>
</li>
<li>
<p><code>realTimeUsers.hidden</code> (boolean)</p>
</li>
<li>
<p><code>settings.nightDayMode</code> (boolean)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">New property in <code>ui-menu.json</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">coreMenusConfiguration</span><span class="delimiter">&quot;</span></span>:
  [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">coreMenuId1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">coreMenuId2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">coreMenuId3</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">showOnlyForGroups</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">ADMIN</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">SOME_OTHER_GROUP</span><span class="delimiter">&quot;</span></span>]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All core menus should be listed under this new <code>coreMenusConfiguration</code> property in <code>ui-menu.json</code>, each with their own
<code>visible</code> and (optionally) <code>showOnlyForGroups</code> property.</p>
</div>
<div class="paragraph">
<p>Necessary actions for the migration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the deprecated properties listed above from your <code>web-ui.json</code></p>
</li>
<li>
<p>Add a <code>coreMenusConfiguration</code> block to your <code>ui-menu.json</code> (see the
<a href="/documentation/current/reference_doc/index.html#core_menu_config">documentation</a>
for details and a full example)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_simplification_mongodb_configuration"><a class="anchor" href="#_simplification_mongodb_configuration"></a>10.3. Simplification MongoDB Configuration</h3>
<div class="paragraph">
<p>We are getting rid of our specific MongoDB configuration to let SpringBoot autoconfigure it. As a result, we are
removing support for the <code>spring.data.mongodb.uris</code> property in favour of the standard <code>spring.data.mongodb.uri</code>
property. Please change the application configuration files for the services accordingly.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This property can only hold a single URI.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_10_0_to_release_2_11_0"><a class="anchor" href="#_migration_guide_from_release_2_10_0_to_release_2_11_0"></a>11. Migration Guide from release 2.10.0 to release 2.11.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_logging_screen_filter_with_tags_list"><a class="anchor" href="#_logging_screen_filter_with_tags_list"></a>11.1. Logging screen : Filter with tags list</h3>
<div class="paragraph">
<p>As for archives screen, now you have to specify the list of tags you want to see in the filter of logging screen.
You have to set this list in the <code>web-ui.json</code> file, with the parameter <code>logging.filters.tags.list</code>. For example :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="key"><span class="delimiter">&quot;</span><span class="content">logging</span><span class="delimiter">&quot;</span></span>: {
  <span class="key"><span class="delimiter">&quot;</span><span class="content">filters</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span>: [
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Label for tag 1</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">tag1</span><span class="delimiter">&quot;</span></span>
        }
      ]
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_2_11_0_to_release_3_0_0"><a class="anchor" href="#_migration_guide_from_release_2_11_0_to_release_3_0_0"></a>12. Migration Guide from release 2.11.0 to release 3.0.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_changes_in_configuration_due_to_business_translation_mechanism_removal"><a class="anchor" href="#_changes_in_configuration_due_to_business_translation_mechanism_removal"></a>12.1. Changes in configuration due to business translation mechanism removal</h3>
<div class="paragraph">
<p>In order to remove unnecessary complexity for third-party, we have decided to remove translation for
some of business data, this implies the following migration tasks :</p>
</div>
<div class="sect3">
<h4 id="_template_directory"><a class="anchor" href="#_template_directory"></a>12.1.1. Template directory</h4>
<div class="paragraph">
<p>The <code>template</code> directory does not contain language repository anymore. There is one template per process/state
 and the templates are located directly in this directory. So you have to move your template for your language directly to the template directory</p>
</div>
</div>
<div class="sect3">
<h4 id="_changes_in_config_json"><a class="anchor" href="#_changes_in_config_json"></a>12.1.2. Changes in config.json</h4>
<div class="paragraph">
<p>In config.json, the fields <code>process.name</code>, <code>state.name</code> and <code>state.description</code> must not contain i18n data anymore, they must only contain string data. These data will be simply displayed on the screen.</p>
</div>
</div>
<div class="sect3">
<h4 id="_new_file_i18n_json"><a class="anchor" href="#_new_file_i18n_json"></a>12.1.3. New file i18n.json</h4>
<div class="paragraph">
<p>The bundle shall contain a new i18n.json file in the root directory. The i18n.json file contains internationalization information for title and summary fields. We keep an i18n mechanism for these two fields in order to have the possibility to adapt the title or summary of the card without having to modify the code of the third party tool sending the card (using only one "language" for translation)</p>
</div>
<div class="paragraph">
<p>Here is an example file :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
	"message":{
		"title":"Message",
		"summary":"Message received"
	},
	"chartDetail" : { "title":"A Chart"},
	"chartLine" : { "title":"Electricity consumption forecast"},
	"question" : {"title": " Planned Outage"},
	"contingencies": {"title" : " Network Contingencies ","summary":"Contingencies report for French network"},
	"processState": {
		"title":"Process state ({{status}})"
	}
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_i18n_folder"><a class="anchor" href="#_i18n_folder"></a>12.1.4. i18n folder</h4>
<div class="paragraph">
<p>The folder <code>i18n</code> and contained files has to be removed from bundle structure.</p>
</div>
</div>
<div class="sect3">
<h4 id="_processes_groups"><a class="anchor" href="#_processes_groups"></a>12.1.5. Processes groups</h4>
<div class="paragraph">
<p>There is no possibility anymore to have translation for the process group name. You can just define
the name of the group in the uploaded file. Here is an example of this file :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">groups</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">processgroup1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Process Group 1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">processes</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">process1</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">process2</span><span class="delimiter">&quot;</span></span>
      ]
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">processgroup2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Process Group 2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">processes</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">process3</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">process4</span><span class="delimiter">&quot;</span></span>
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_script_to_migrate_an_existing_database"><a class="anchor" href="#_script_to_migrate_an_existing_database"></a>12.1.6. Script to migrate an existing database</h4>
<div class="paragraph">
<p>Opfab 3.0 needs two new fields in database : <code>titleTranslated</code> and <code>summaryTranslated</code>.
In order to add these two new fields to an existing database, you have to pull the image <code>migration-opfab3</code>,
go to the directory <code>OF_HOME/src/tooling/migration-opfab3</code> and execute the script <code>docker-compose.sh</code>, this way :</p>
</div>
<div class="paragraph">
<p><code>./docker-compose.sh &lt;containerNameMongoDB&gt; &lt;portMongoDB&gt; &lt;loginMongoDB&gt; &lt;passwordMongoDB&gt; &lt;pathToBundlesDirectory&gt;</code></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The bundles directory is the directory where you store all the "untar" bundles in the new
format with the <code>i18n.json</code> file. It is not the directory where the opfab instance stores the bundles.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_file_web_ui_json"><a class="anchor" href="#_configuration_file_web_ui_json"></a>12.2. Configuration file <code>web-ui.json</code></h3>
<div class="paragraph">
<p>Some attributes have been renamed to be more consistent with their meaning.
Here are these attributes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>settings.infos.description</code> renamed <code>settings.infos.hide.description</code></p>
</li>
<li>
<p><code>settings.infos.language</code> renamed <code>settings.infos.hide.language</code></p>
</li>
<li>
<p><code>settings.infos.timezone</code> renamed <code>settings.infos.hide.timezone</code></p>
</li>
<li>
<p><code>settings.infos.tags</code> renamed <code>settings.infos.hide.tags</code></p>
</li>
<li>
<p><code>settings.infos.sounds</code> renamed <code>settings.infos.hide.sounds</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So if you use these fields in <code>web-ui.json</code> file, you have to rename them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_file_common_docker_yml"><a class="anchor" href="#_configuration_file_common_docker_yml"></a>12.3. Configuration file common-docker.yml</h3>
<div class="paragraph">
<p>A new parameter named <code>operatorfabric.servicesUrls.businessconfig</code>  has to be added to your configuration file <code>common-docker.yml</code> (or equivalent)</p>
</div>
<div class="paragraph">
<p>For example the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>operatorfabric:
  businessLogActivated: true
  servicesUrls:
    users: &quot;users:8080&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>operatorfabric:
  businessLogActivated: true
  servicesUrls:
    users: &quot;users:8080&quot;
    businessconfig: &quot;businessconfig:8080&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nginx_conf_template_file"><a class="anchor" href="#_nginx_conf_template_file"></a>12.4. Nginx.conf.template file</h3>
<div class="paragraph">
<p>In order to have a better organized file, we have modified <code>nginx.conf.template</code> file, more precisely the information
for location <code>/cardspub/cards</code>. Please report this modification to your local config.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_0_0_to_release_3_1_0"><a class="anchor" href="#_migration_guide_from_release_3_0_0_to_release_3_1_0"></a>13. Migration Guide from release 3.0.0 to release 3.1.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_kafka_date_format"><a class="anchor" href="#_kafka_date_format"></a>13.1. Kafka date format</h3>
<div class="paragraph">
<p>The signature for sending card dates via Kafka have been changed to better reflect the REST API. Instead
of sending the date in seconds since epoch, you can now use the Java Instant object. The following methods are affected:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>startDate</code></p>
</li>
<li>
<p><code>endDate</code></p>
</li>
<li>
<p><code>lttd</code></p>
</li>
<li>
<p><code>publishDate</code></p>
</li>
<li>
<p><code>TimeSpan.setStart</code></p>
</li>
<li>
<p><code>TimeSpan.setEnd</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example the following code:</p>
</div>
<div class="paragraph">
<p><code>Card card = Card.newBuilder().setStartDate(12345L).build();</code></p>
</div>
<div class="paragraph">
<p>becomes:</p>
</div>
<div class="paragraph">
<p><code>Card card = Card.newBuilder().setStartDate(Instant.now()).build();</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_1_0_to_release_3_2_0"><a class="anchor" href="#_migration_guide_from_release_3_1_0_to_release_3_2_0"></a>14. Migration Guide from release 3.1.0 to release 3.2.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cache_configuration_for_i18n_files"><a class="anchor" href="#_cache_configuration_for_i18n_files"></a>14.1. Cache configuration for i18n files</h3>
<div class="paragraph">
<p>Add the following lines in your nginx.conf to avoid keeping in cache old translation files when migrating opfab</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  location /ui/assets/i18n/ {
    add_header Cache-Control &quot;no-cache&quot;;
    alias /usr/share/nginx/html/assets/i18n/;
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>see the reference nginx configuration file : <a href="https://github.com/opfab/operatorfabric-core/blob/master/config/docker/nginx.conf" class="bare">github.com/opfab/operatorfabric-core/blob/master/config/docker/nginx.conf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_tag_feed_filter_removal"><a class="anchor" href="#_tag_feed_filter_removal"></a>14.2. Tag feed filter removal</h3>
<div class="paragraph">
<p>The feature to filter tags in the feed has been removed. In consequence, you can remove the following parameters in your web-ui.json configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>settings.tags.hide</p>
</li>
<li>
<p>settings.infos.hide.tags</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_4_0_to_release_3_5_0"><a class="anchor" href="#_migration_guide_from_release_3_4_0_to_release_3_5_0"></a>15. Migration Guide from release 3.4.0 to release 3.5.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_timezone_management_removal"><a class="anchor" href="#_timezone_management_removal"></a>15.1. Timezone management removal</h3>
<div class="paragraph">
<p>The feature to manage timeline inside opfab has been removed. In consequence, you can remove the following parameters in your web-ui.json configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>i10n.supported.time-zones</p>
</li>
<li>
<p>settings.infos.hide.timezone</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kafka_card_format_changes"><a class="anchor" href="#_kafka_card_format_changes"></a>15.2. Kafka card format changes</h3>
<div class="paragraph">
<p>The Kafka message schema has been changed. The single card used to send messages to and receive from Operator Fabric
has been split into two cards; one for sending to OpFab and one for receiving messages from OpFab. The CardCommand structure now contains a <code>card</code>  (to OpFab) and a <code>responseCard</code> (from OpFab).
You will need to change the Kafka listener to get the response card.</p>
</div>
<div class="paragraph">
<p>For example change</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="annotation">@KafkaListener</span>
    <span class="directive">public</span> <span class="type">void</span> receivedResponseCard(<span class="annotation">@Payload</span> ConsumerRecord&lt;<span class="predefined-type">String</span>, CardCommand&gt; consumerRecord) {
        CardCommand cardCommand = consumerRecord.value();
        Card = cardCommand.getCard();</code></pre>
</div>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="annotation">@KafkaListener</span>
    <span class="directive">public</span> <span class="type">void</span> receivedResponseCard(<span class="annotation">@Payload</span> ConsumerRecord&lt;<span class="predefined-type">String</span>, CardCommand&gt; consumerRecord) {
        CardCommand cardCommand = consumerRecord.value();
        ResponseCard = cardCommand.getResponseCard();</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_redirect_to_business_application_from_a_card"><a class="anchor" href="#_redirect_to_business_application_from_a_card"></a>15.2.1. Redirect to business application from a card</h4>
<div class="paragraph">
<p>The <code>templateGateway.redirectToBusinessMenu</code> function to redirect to business application from a card has changed. The third argument of the function is now a url extension that can contain sub paths and/or parameters instead of only parameters.</p>
</div>
<div class="paragraph">
<p>You will need to change the call adding a '?' character at the beginning of the third argument.</p>
</div>
<div class="paragraph">
<p>For example change:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>templateGateway.redirectToBusinessMenu('myMenu','myEntry','param1=aParam&amp;param2=anotherParam')</pre>
</div>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="literalblock">
<div class="content">
<pre>templateGateway.redirectToBusinessMenu('myMenu','myEntry','?param1=aParam&amp;param2=anotherParam')</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_5_0_to_release_3_6_0"><a class="anchor" href="#_migration_guide_from_release_3_5_0_to_release_3_6_0"></a>16. Migration Guide from release 3.5.0 to release 3.6.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_template_rendering"><a class="anchor" href="#_template_rendering"></a>16.1. Template rendering</h3>
<div class="paragraph">
<p>Bootstrap library has been migrate to v5.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you use bootstrap css classes in your templates, it&#8217;s strongly recommended to check your template rendering after migration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Charts library has been upgraded from version 3.2.1 to 3.7.1</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you use charts in your templates, it&#8217;s strongly recommended to check your template rendering after migration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_mongo_data_migration_steps"><a class="anchor" href="#_mongo_data_migration_steps"></a>16.2. Mongo data migration steps</h3>
<div class="paragraph">
<p>This section outlines the necessary steps to migrate existing data.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you use response card feature, you need to perform these steps before starting up the OperatorFabric instance to avoid displaying wrong data in archives page.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Backup your existing Mongo data.</p>
</li>
<li>
<p>Run the following scripts in the mongo shell to update the value of the new field <code>deletionDate</code> for archived cards:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">db.archivedCards.updateMany(
{&quot;deletionDate&quot;: {&quot;$exists&quot;: false}},
{&quot;$set&quot;: {&quot;deletionDate&quot;: new ISODate(&quot;1970-01-01T00:00:00Z&quot;)}}
)</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_about_screen"><a class="anchor" href="#_about_screen"></a>16.3. About screen</h3>
<div class="paragraph">
<p>You do not need anymore to precise opfab version in web-ui.json to see it on about screen. So you need to remove the corresponding line. For example :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>      "operatorfabric": {
        "name": "OperatorFabric",
        "rank": 0,
        "version": "2.5.0.RELEASE"
      }</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deprecated_feature"><a class="anchor" href="#_deprecated_feature"></a>16.4. Deprecated feature</h3>
<div class="sect3">
<h4 id="_method_templategateway_getspecificcardinformation"><a class="anchor" href="#_method_templategateway_getspecificcardinformation"></a>16.4.1. Method templateGateway.getSpecificCardInformation()</h4>
<div class="paragraph">
<p>Implementation of method templateGateway.getSpecificCardInformation() in usercard templates is now deprecated, replace it by usercardTemplateGateway.getSpecificCardInformation(). It is just a naming change, the behavior is the same.</p>
</div>
</div>
<div class="sect3">
<h4 id="_restrict_recipient_dropdown_list_for_user"><a class="anchor" href="#_restrict_recipient_dropdown_list_for_user"></a>16.4.2. Restrict recipient dropdown list for user</h4>
<div class="paragraph">
<p>Using "recipientList" in state definition (in config.json) is now deprecated</p>
</div>
<div class="paragraph">
<p>If you use  "recipientList" to restrict the list of recipients shown to user, replace it with code in template as in the following example :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    usercardTemplateGateway.setDropdownEntityRecipientList([
            {"id": "ENTITY_FR", "levels": [0,1]},
            {"id": "IT_SUPERVISOR_ENTITY"}
        ]);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_set_the_list_of_recipients"><a class="anchor" href="#_set_the_list_of_recipients"></a>16.4.3. Set the list of recipients</h4>
<div class="paragraph">
<p>Using "recipientList" in state definition (in config.json) is now deprecated</p>
</div>
<div class="paragraph">
<p>If you use  "recipientList" to set the list of recipients, provide now the list of recipients when returning the card object in usercardTemplateGateway.getSpecificCardInformation() in the field entityRecipients.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    usercardTemplateGateway.getSpecificCardInformation = function () {
        const message = document.getElementById('message').value;
        const card = {
          summary : {key : "message.summary"},
          title : {key : "message.title"},
          entityRecipients: ["ENTITY_FR","IT_SUPERVISOR_ENTITY"],
          data : {message: message}
        };
        if (message.length&lt;1) return { valid:false , errorMsg:'You must provide a message'}
        return {
            valid: true,
            card: card
        };</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_6_0_to_release_3_7_0"><a class="anchor" href="#_migration_guide_from_release_3_6_0_to_release_3_7_0"></a>17. Migration Guide from release 3.6.0 to release 3.7.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_docker_images_names_changed"><a class="anchor" href="#_docker_images_names_changed"></a>17.1. Docker images names changed</h3>
<div class="paragraph">
<p>From version 3.7.0 the docker names of the former "business services" are changed. Here are there old names and the new ones.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old docker name</th>
<th class="tableblock halign-left valign-top">New docker name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-cards-consultation-business-service:3.6.0.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-cards-consultation-service:3.7.0.RELEASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-cards-publication-business-service:3.6.0.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-cards-publication-service:3.7.0.RELEASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-users-business-service:3.6.0.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-users-service:3.7.0.RELEASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-businessconfig-business-service:3.6.0.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lfeoperatorfabric/of-businessconfig-service:3.7.0.RELEASE</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You must change your docker-compose files accordingly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_third_parties_configuration"><a class="anchor" href="#_third_parties_configuration"></a>17.2. Third parties configuration</h3>
<div class="paragraph">
<p>The configuration of the third parties applications as external recipents has changed. It is now possible to configure wether the user token shall be propagated to the third party or not by setting the "propagateUserToken" boolean property.</p>
</div>
<div class="paragraph">
<p>If you have third parties configured in your 'cards-publication.yml' you should change the configuration as follows:</p>
</div>
<div class="paragraph">
<p>From:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>externalRecipients-url: "{\
           third-party1: \"http://thirdparty1/test1\", \
           third-party2: \"http://thirdparty2:8090/test2\", \
           }"</pre>
</div>
</div>
<div class="paragraph">
<p>To</p>
</div>
<div class="literalblock">
<div class="content">
<pre>external-recipients:
  recipients:
    - id: "third-party1"
      url: "http://thirdparty1/test1"
      propagateUserToken: true
    - id: "third-party2"
      url: "http://thirdparty2:8090/test2"
      propagateUserToken: true</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rename_attribute_externaldeviceid"><a class="anchor" href="#_rename_attribute_externaldeviceid"></a>17.3. Rename attribute externalDeviceId</h3>
<div class="paragraph">
<p>It is now possible to have several external device systems, therefore the attribute externalDeviceId is now renamed into externalDeviceIds and is now a list.</p>
</div>
<div class="sect3">
<h4 id="_in_the_configuration_file"><a class="anchor" href="#_in_the_configuration_file"></a>17.3.1. In the configuration file</h4>
<div class="paragraph">
<p>In the configuration file, replace</p>
</div>
<div class="literalblock">
<div class="content">
<pre>userConfigurations:
        - userLogin: operator1_fr
          externalDeviceId: CDS_1
        - userLogin: operator2_fr
          externalDeviceId: CDS_2
        - userLogin: operator3_fr
          externalDeviceId: CDS_3
        - userLogin: operator4_fr
          externalDeviceId: CDS_1</pre>
</div>
</div>
<div class="paragraph">
<p>by</p>
</div>
<div class="literalblock">
<div class="content">
<pre>userConfigurations:
        - userLogin: operator1_fr
          externalDeviceIds: ["CDS_1"]
        - userLogin: operator2_fr
          externalDeviceIds: ["CDS_2"]
        - userLogin: operator3_fr
          externalDeviceIds: ["CDS_3"]
        - userLogin: operator4_fr
          externalDeviceIds: ["CDS_1"]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_changes_in_the_mongo_data_base"><a class="anchor" href="#_changes_in_the_mongo_data_base"></a>17.3.2. Changes in the Mongo data base</h4>
<div class="sect4">
<h5 id="_before_the_migration"><a class="anchor" href="#_before_the_migration"></a>17.3.2.1. Before the migration</h5>
<div class="paragraph">
<p>Before the migration to 3.7.0, one should save its current data base, then add the attribute "externalDeviceIds" based on the
value of the existing attribute "externalDeviceId". To add this attribute, simply launch the commands :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>var collection = db.getCollection("userConfigurations")
collection.find().forEach(function(user) {collection.updateOne({_id: user._id}, {$set: {externalDeviceIds: [user.externalDeviceId]}})})</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_once_the_migration_is_done"><a class="anchor" href="#_once_the_migration_is_done"></a>17.3.2.2. Once the migration is done</h5>
<div class="paragraph">
<p>Once the migration to 3.7.0 is done, the attribute "externalDeviceId" is not used anymore.
You can remove it by launching :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>var collection = db.getCollection("userConfigurations")
collection.find().forEach(function(user) {collection.updateOne({_id: user._id}, {$unset: {"externalDeviceId": 1}})})</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deprecated_feature_2"><a class="anchor" href="#_deprecated_feature_2"></a>17.4. Deprecated feature</h3>
<div class="sect3">
<h4 id="_field_recurrence"><a class="anchor" href="#_field_recurrence"></a>17.4.1. Field recurrence</h4>
<div class="paragraph">
<p>Using "recurrence" field returned by getSpecificCardInformation() method definition is now deprecated.</p>
</div>
<div class="paragraph">
<p>If you are using the "viewCardInAgenda" and "recurrence" field, use the "timeSpans" field instead when returning the card object in usercardTemplateGateway.getSpecificCardInformation() to configure the visibility of the card in timeline and agenda.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    usercardTemplateGateway.getSpecificCardInformation = function () {
        const message = document.getElementById('message').value;
        const card = {
          summary : {key : "message.summary"},
          title : {key : "message.title"},
          entityRecipients: ["ENTITY_FR","IT_SUPERVISOR_ENTITY"],
          data : {message: message}
        };

        const recurrence = {
            daysOfWeek : [1,2,3],
            hoursAndMinutes : {hours:10,minutes:44},
            durationInMinutes: 15
        }

        const mystartDate = new Date();
        const timeSpans = [{
            startDate: mystartDate.getTime(),
            endDate: mystartDate.getTime() + 7 * 24 * 3600000,
            recurrence: recurrence
        }]

        return {
            valid: true,
            card: card,
            timeSpans: timeSpans
        };</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_7_0_to_release_3_8_0"><a class="anchor" href="#_migration_guide_from_release_3_7_0_to_release_3_8_0"></a>18. Migration Guide from release 3.7.0 to release 3.8.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_kafka_card_format_changes_2"><a class="anchor" href="#_kafka_card_format_changes_2"></a>18.1. Kafka card format changes</h3>
<div class="paragraph">
<p>The Kafka message schema has been changed. Two new, optional fields are added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>wktGeometry</code></p>
</li>
<li>
<p><code>wktProjection</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Make sure your Kafka consumers and producers are updated and use the latest card and responseCard definitions.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_8_x_to_release_3_9_0"><a class="anchor" href="#_migration_guide_from_release_3_8_x_to_release_3_9_0"></a>19. Migration Guide from release 3.8.x to release 3.9.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_web_ui_json_config_file"><a class="anchor" href="#_web_ui_json_config_file"></a>19.1. <code>web-ui.json</code> config file</h3>
<div class="paragraph">
<p>To declare settings parameters, you now need to group all fields under <code>settings: { }</code> and you must not use a statement like this one : <code>settings.replayInterval: 10</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>Replace the following invalid settings config</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  &quot;settings.replayInterval&quot;: 10,
  &quot;settings.replayEnabled&quot;: true,
  &quot;settings&quot;: {
    &quot;about&quot;: {
      &quot;keycloack&quot;: {
        &quot;name&quot;: &quot;Keycloak&quot;,
        &quot;rank&quot;: 2,
        &quot;version&quot;: &quot;6.0.1&quot;
      },
    }
    &quot;locale&quot;: &quot;en&quot;,
    &quot;dateTimeFormat&quot;: &quot;HH:mm DD/MM/YYYY&quot;,
    &quot;dateFormat&quot;: &quot;DD/MM/YYYY&quot;,
    &quot;styleWhenNightDayModeDesactivated&quot;: &quot;NIGHT&quot;
  },</code></pre>
</div>
</div>
<div class="paragraph">
<p>By this valid one :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  &quot;settings&quot;: {
    &quot;replayInterval&quot;: 10,
    &quot;replayEnabled&quot;: true,
    &quot;about&quot;: {
      &quot;keycloack&quot;: {
        &quot;name&quot;: &quot;Keycloak&quot;,
        &quot;rank&quot;: 2,
        &quot;version&quot;: &quot;6.0.1&quot;
      },
    }
    &quot;locale&quot;: &quot;en&quot;,
    &quot;dateTimeFormat&quot;: &quot;HH:mm DD/MM/YYYY&quot;,
    &quot;dateFormat&quot;: &quot;DD/MM/YYYY&quot;,
    &quot;styleWhenNightDayModeDesactivated&quot;: &quot;NIGHT&quot;
  },</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_guide_from_release_3_9_x_to_release_3_10_0"><a class="anchor" href="#_migration_guide_from_release_3_9_x_to_release_3_10_0"></a>20. Migration Guide from release 3.9.x to release 3.10.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_card_publication_with_not_existent_process_or_state"><a class="anchor" href="#_card_publication_with_not_existent_process_or_state"></a>20.1. Card publication with not existent process or state</h3>
<div class="paragraph">
<p>OperatorFabric will refuse the publication of cards referring a not existent process or state.
To allow the publication of cards with not existent proces or state you should set the <code>authorizeToSendCardWithInvalidProcessState</code> property to <code>true</code> in <code>cards-publication.yml</code> configuration file</p>
</div>
</div>
<div class="sect2">
<h3 id="_web_ui_json_config_file_2"><a class="anchor" href="#_web_ui_json_config_file_2"></a>20.2. <code>web-ui.json</code> config file</h3>
<div class="sect3">
<h4 id="_settings_about_section"><a class="anchor" href="#_settings_about_section"></a>20.2.1. <code>settings.about</code> section</h4>
<div class="paragraph">
<p>The section to configure <code>about</code> screen has been moved from <code>settings</code> section to the root level. You need to change the configuration file accordingly.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>Replace the following invalid config</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  &quot;settings&quot;: {
    &quot;about&quot;: {
      &quot;keycloack&quot;: {
        &quot;name&quot;: &quot;Keycloak&quot;,
        &quot;rank&quot;: 2,
        &quot;version&quot;: &quot;6.0.1&quot;
      },
    },
    &quot;replayInterval&quot;: 10,
    &quot;replayEnabled&quot;: true,
    &quot;locale&quot;: &quot;en&quot;,
    &quot;dateTimeFormat&quot;: &quot;HH:mm DD/MM/YYYY&quot;,
    &quot;dateFormat&quot;: &quot;DD/MM/YYYY&quot;,
    &quot;styleWhenNightDayModeDesactivated&quot;: &quot;NIGHT&quot;
  },</code></pre>
</div>
</div>
<div class="paragraph">
<p>By this valid one :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  &quot;settings&quot;: {
    &quot;replayInterval&quot;: 10,
    &quot;replayEnabled&quot;: true,
    &quot;locale&quot;: &quot;en&quot;,
    &quot;dateTimeFormat&quot;: &quot;HH:mm DD/MM/YYYY&quot;,
    &quot;dateFormat&quot;: &quot;DD/MM/YYYY&quot;,
    &quot;styleWhenNightDayModeDesactivated&quot;: &quot;NIGHT&quot;
  },
  &quot;about&quot;: {
    &quot;keycloack&quot;: {
      &quot;name&quot;: &quot;Keycloak&quot;,
      &quot;rank&quot;: 2,
      &quot;version&quot;: &quot;6.0.1&quot;
    }
  }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_settings_infos_hide_section"><a class="anchor" href="#_settings_infos_hide_section"></a>20.2.2. <code>settings.infos.hide</code> section</h4>
<div class="paragraph">
<p>The section to configure hidden fields for the settings screen has been moved from <code>settings.infos.hide</code> section to
<code>settingsScreen.hiddenSettings</code>. This new field is an array of string and possible values are : "description",
"language", "remoteLoggingEnabled" and "sounds". So, you need to change the configuration file accordingly.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>Replace the following invalid config</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  &quot;settings&quot;: {
    &quot;infos&quot;: {
      &quot;hide&quot;: {
        &quot;description&quot;: true
      }
    }
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>By this valid one :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  &quot;settingsScreen&quot;: {
    &quot;hiddenSettings&quot;:  [&quot;description&quot;]
  }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_feed_filtering_and_sorting"><a class="anchor" href="#_feed_filtering_and_sorting"></a>20.2.3. Feed filtering and sorting</h4>
<div class="paragraph">
<p>In feed configuration the following parameters to hide filtering and sorting options have been removed: <code>feed.card.hideAckFilter</code>, <code>feed.card.hideReadSort</code>, <code>feed.card.hideSeveritySort</code></p>
</div>
<div class="paragraph">
<p>Instead it is possible to configure the default behaviour for sorting and acknowlegment filtering by setting the following parameters in <code>web-ui.json</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>feed.defaultSorting</code> : possible values are : "unread", "date", "severity", "startDate", "endDate"</p>
</li>
<li>
<p><code>feed.defaultAcknowledgmentFilter</code> : possible values are : "notack", "ack", "all"</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>